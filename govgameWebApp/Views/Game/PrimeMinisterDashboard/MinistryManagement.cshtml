@{
    Layout = "_GameLayout";

    Country country = (Country)ViewData["country"];
    string ministerId;
    string invitedMinisterId;

    ViewData["Title"] = "Ministry management";
    ViewData["PageName"] = "Ministry management";
}

<h1>Ministries</h1>
<br />
<hr />
<ul id="ministry-list" class="no-margin-ul">
    @foreach (MinistryHelper.MinistryCode ministryCode in Enum.GetValues(typeof(MinistryHelper.MinistryCode)))
    {
        @if (ministryCode == MinistryHelper.MinistryCode.PrimeMinister || ministryCode == MinistryHelper.MinistryCode.None) continue;
        ministerId = country.GetMinisterIdByCode(ministryCode);
        invitedMinisterId = country.GetInvitedMinisterIdByCode(ministryCode);
        <li class="ministry-li" id="ministry-li-@ministryCode.ToString("g")" onclick="location.href = '/Game/PrimeMinisterDashboard/ViewMinistry?ministry=@ministryCode'">
            <img class="ministry-image" src="~/images/ministries/@(MinistryHelper.MinistryCodeToMinistryImageFileName(ministryCode))" height="175" />
            <div class="ministry-status-div">
                <h3>
                    @if (ministerId != "none")
                    {
                        PublicUser minister;
                        try
                        {
                            minister = MongoDBHelper.UsersDatabase.GetPublicUser(ministerId);
                            <text>Minister: @minister.Username</text>
                        }
                        catch
                        {
                            <text>No minister</text>
                        }
                    }
                    else
                    {
                        if (invitedMinisterId != "none")
                        {
                            PublicUser minister;
                            try
                            {
                                minister = MongoDBHelper.UsersDatabase.GetPublicUser(ministerId);
                                <text>Invitation sent to: @minister.Username</text>
                            }
                            catch
                            {
                                <text>No minister</text>
                            }
                        }
                        else
                        {
                            <text>No minister</text>
                        }
                    }
                </h3>
                <p class="see-more-text">(Click to see more)</p>
            </div>
        </li>
        <hr />
    }
</ul>
<br />

<style>
    .ministry-li {
        margin-bottom: 10px;
        margin-right: 50px;
        display: grid;
        grid-template-columns: 350px auto;
        margin-left: 20px;
        cursor: pointer;
    }

    .ministry-image {
        grid-column-start: 1;
        grid-column-end: 2;
    }

    .ministry-status-div {
        align-items: center;
        margin-left: 20px;
        position: relative;
    }

    .see-more-text {
        position: absolute;
        bottom: 0;
    }

    #ministry-list {
        list-style: none;
    }
</style>